<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock-paper-Scissors</title>
</head>
<body>
    <button class="button rock">Rock</button>
    <button class="button paper">Paper</button>
    <button class="button scissors">Scissors</button>
    <div class="results">
    </div>

    <script>
        function computerPlay() {
            let choices = ["Rock", "Paper", "Scissors"]
            let choice = Math.floor(Math.random() * 3)
            return choices[choice]
        }
        function playRound(playerSelection, computerSelection) {
            const results = document.querySelector('.results');
            let playSelectionInsensitive = playerSelection[0].toUpperCase() + playerSelection.slice(1)
            const result = document.createElement('p');
            results.appendChild(result);
            if (playSelectionInsensitive == "Rock" && computerSelection == "Paper" || playSelectionInsensitive == "Paper" && computerSelection == "Scissors" || playSelectionInsensitive == "Scissors" && computerSelection == "Rock") {
                result.textContent = `You Lose! ${computerSelection} beats ${playSelectionInsensitive}`;
                return -1;
            } else if (playSelectionInsensitive == "Rock" && computerSelection == "Scissors" || playSelectionInsensitive == "Paper" && computerSelection == "Rock" || playSelectionInsensitive == "Scissors" && computerSelection == "Paper") {
                result.textContent = `You Win! ${playSelectionInsensitive} beats ${computerSelection}`;
                return 1;
            } else {
                result.textContent = "It's a Draw!"
                return 0;
            }
        }
        function game() {

            const score = document.createElement('h2');
            const results = document.querySelector('.results');
            results.appendChild(score);

            let playerPoints = 0;
            let computerPoints = 0;

            score.textContent = `Player = ${playerPoints} Computer = ${computerPoints}`;

            paper.addEventListener('click', function (e) {
                let round = playRound(e.target.textContent, computerPlay());
                if(round === 1) {
                    playerPoints += 1;
                    score.textContent = `Player = ${playerPoints} Computer = ${computerPoints}`;
                    checkWinner(playerPoints, computerPoints)
                } else if (round === -1) {
                    computerPoints += 1;
                    score.textContent = `Player = ${playerPoints} Computer = ${computerPoints}`;
                    checkWinner(playerPoints, computerPoints)
                }
            })
            rock.addEventListener('click', function (e) {
                let round = playRound(e.target.textContent, computerPlay());
                console.log(round);
                if(round === 1) {
                    playerPoints += 1;
                    score.textContent = `Player = ${playerPoints} Computer = ${computerPoints}`;
                    checkWinner(playerPoints, computerPoints)
                } else if (round === -1) {
                    computerPoints += 1;
                    score.textContent = `Player = ${playerPoints} Computer = ${computerPoints}`;
                    checkWinner(playerPoints, computerPoints)
                }
            })
            scissors.addEventListener('click', function (e) {
                let round = playRound(e.target.textContent, computerPlay());
                console.log(round);
                if(round === 1) {
                    playerPoints += 1;
                    score.textContent = `Player = ${playerPoints} Computer = ${computerPoints}`;
                    checkWinner(playerPoints, computerPoints)
                } else if (round === -1) {
                    computerPoints += 1;
                    score.textContent = `Player = ${playerPoints} Computer = ${computerPoints}`;
                    checkWinner(playerPoints, computerPoints)
                }
            })
            if (playerPoints === 5) console.log("winner");
        }

        function checkWinner(playerPoints, computerPoints) {
            const winner = document.createElement('h3');
            const results = document.querySelector('.results');
            results.appendChild(winner);
            if(playerPoints === 5) {
                winner.textContent = "You've won the game";
            }
            else if(computerPoints === 5) {
                winner.textContent = "You've lost the game";
            }
        }
    
        let rock = document.querySelector('.rock');
        let paper = document.querySelector('.paper');
        let scissors = document.querySelector('.scissors');

        game();

    </script>
</body>
</html>

